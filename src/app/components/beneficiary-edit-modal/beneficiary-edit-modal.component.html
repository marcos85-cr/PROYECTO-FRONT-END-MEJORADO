<ion-header class="ion-no-border">
    <ion-toolbar class="custom-toolbar">
        <ion-title class="modal-title">{{ beneficiary.alias }}</ion-title>
        <ion-buttons slot="end">
            <ion-button fill="clear" (click)="dismiss()" class="close-button">
                <ion-icon name="close" slot="icon-only"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content class="modal-content">

    <!-- Información Bancaria -->
    <div class="info-section">
        <div class="section-header">
            <ion-icon name="business" class="section-icon"></ion-icon>
            <h3 class="section-title">Información Bancaria</h3>
        </div>
        <div class="info-item">
            <div class="info-row">
                <span class="info-label">Banco</span>
                <span class="info-value">{{ beneficiary.banco }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Número de Cuenta</span>
                <span class="info-value account-number">{{ beneficiary.numeroCuenta }}</span>
            </div>
        </div>
    </div>

    <!-- Detalles de la Cuenta -->
    <div class="info-section">
        <div class="section-header">
            <ion-icon name="wallet" class="section-icon"></ion-icon>
            <h3 class="section-title">Detalles</h3>
        </div>
        <div class="info-item">
            <div class="info-row">
                <span class="info-label">Moneda</span>
                <span class="info-value">{{ beneficiary.moneda }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">País</span>
                <span class="info-value">{{ beneficiary.pais }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Estado</span>
                <ion-badge color="primary">
                    {{ beneficiary?.estado }}
                </ion-badge>
            </div>
        </div>
    </div>

    <!-- Sección de Edición de Alias -->
    <div class="info-section">
        <div class="section-header">
            <ion-icon name="create" class="section-icon"></ion-icon>
            <h3 class="section-title">Editar Alias</h3>
        </div>
        <div class="info-item">
            <div *ngIf="!isEditing" class="alias-display">
                <div class="alias-value">{{ beneficiary.alias }}</div>
                <ion-button fill="outline" size="small" color="primary" (click)="startEdit()">
                    <ion-icon name="create" slot="start"></ion-icon>
                    Editar
                </ion-button>
            </div>

            <div *ngIf="isEditing" class="alias-edit">
                <ion-input [(ngModel)]="editedAlias" placeholder="Nuevo alias" class="edit-input">
                </ion-input>
                <div class="edit-buttons">
                    <ion-button fill="outline" size="small" color="medium" (click)="cancelEdit()">
                        Cancelar
                    </ion-button>
                    <ion-button fill="solid" size="small" color="success" (click)="saveChanges()" [disabled]="isSaving">
                        <ion-spinner name="crescent" *ngIf="isSaving"></ion-spinner>
                        <span *ngIf="!isSaving">Guardar</span>
                    </ion-button>
                </div>
            </div>
        </div>
    </div>

    <!-- Advertencia si tiene operaciones pendientes -->
    <div *ngIf="beneficiary.tieneOperacionesPendientes" class="warning-section">
        <ion-icon name="warning" class="warning-icon"></ion-icon>
        <p>Este beneficiario tiene operaciones programadas pendientes. No puede ser eliminado hasta completarlas.</p>
    </div>

</ion-content>

<!-- Footer con Botones de Acción -->
<ion-footer class="ion-no-border">
    <ion-toolbar class="footer-toolbar">
        <div class="footer-buttons">
            <ion-button expand="block" color="danger" fill="outline" (click)="deleteBeneficiary()"
                [disabled]="beneficiary.tieneOperacionesPendientes">
                <ion-icon name="trash" slot="start"></ion-icon>
                Eliminar Beneficiario
            </ion-button>
        </div>
    </ion-toolbar>
</ion-footer>