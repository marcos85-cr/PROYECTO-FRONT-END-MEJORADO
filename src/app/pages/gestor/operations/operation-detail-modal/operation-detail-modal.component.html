<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Detalle de Operación</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="closeModal()">
        <ion-icon name="close" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="operation-detail" *ngIf="operation">
    <!-- Información del Cliente -->
    <ion-card>
      <ion-card-header>
        <ion-card-title color="primary">Información del Cliente</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item lines="none">
          <ion-icon name="person" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Cliente</h3>
            <p>{{ operation.clienteNombre }}</p>
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- Información de la Operación -->
    <ion-card>
      <ion-card-header>
        <ion-card-title color="primary">Detalles de la Operación</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item lines="none">
          <ion-icon name="swap-horizontal" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Tipo</h3>
            <p>{{ operation.tipo }}</p>
          </ion-label>
        </ion-item>
        
        <ion-item lines="none">
          <ion-icon name="document-text" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Descripción</h3>
            <p>{{ operation.descripcion }}</p>
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- Información de Cuentas -->
    <ion-card>
      <ion-card-header>
        <ion-card-title color="primary">Cuentas Involucradas</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item lines="none">
          <ion-icon name="card" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Cuenta Origen</h3>
            <p>{{ operation.cuentaOrigenNumero }}</p>
          </ion-label>
        </ion-item>
        
        <ion-item lines="none" *ngIf="operation.cuentaDestinoNumero">
          <ion-icon name="card-outline" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Cuenta Destino</h3>
            <p>{{ operation.cuentaDestinoNumero }}</p>
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- Información Financiera -->
    <ion-card>
      <ion-card-header>
        <ion-card-title color="success">Información Financiera</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item lines="none">
          <ion-icon name="cash" slot="start" color="success"></ion-icon>
          <ion-label>
            <h3>Monto</h3>
            <p><strong>{{ operation.moneda }} {{ operation.monto | number:'1.2-2' }}</strong></p>
          </ion-label>
        </ion-item>
        
        <ion-item lines="none">
          <ion-icon name="receipt" slot="start" color="success"></ion-icon>
          <ion-label>
            <h3>Comisión</h3>
            <p>{{ operation.moneda }} {{ operation.comision | number:'1.2-2' }}</p>
          </ion-label>
        </ion-item>
        
        <ion-item lines="none">
          <ion-icon name="calculator" slot="start" color="success"></ion-icon>
          <ion-label>
            <h3>Total</h3>
            <p><strong>{{ operation.moneda }} {{ (operation.monto + operation.comision) | number:'1.2-2' }}</strong></p>
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- Estado y Fecha -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Estado de la Operación</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item lines="none">
          <ion-icon name="flag" slot="start" [color]="getStatusColor(operation.estado)"></ion-icon>
          <ion-label>
            <h3>Estado</h3>
            <ion-badge [color]="getStatusColor(operation.estado)">
              {{ operation.estado }}
            </ion-badge>
          </ion-label>
        </ion-item>
        
        <ion-item lines="none">
          <ion-icon name="calendar" slot="start" color="medium"></ion-icon>
          <ion-label>
            <h3>Fecha</h3>
            <p>{{ operation.fecha | date:'dd/MM/yyyy, hh:mm a' }}</p>
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- Botones de Acción -->
    <div class="action-buttons" *ngIf="operation.estado === 'PendienteAprobacion'">
      <ion-button expand="block" color="danger" fill="outline" (click)="rejectOperation()">
        <ion-icon name="close-circle" slot="start"></ion-icon>
        Rechazar Operación
      </ion-button>
      
      <ion-button expand="block" color="success" (click)="approveOperation()">
        <ion-icon name="checkmark-circle" slot="start"></ion-icon>
        Aprobar Operación
      </ion-button>
    </div>
  </div>
</ion-content>