<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-title color="secondary">Configuración</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <!-- PERFIL CLICKEABLE -->
  <ion-row class="ion-justify-content-center ion-align-items-center profile-row" routerLink="/profile">
    <ion-col size="auto">
      <ion-avatar class="profile-avatar">
        <img src="assets/icon/BANK.jpg" />
      </ion-avatar>
    </ion-col>
    <ion-col size="auto" class="profile-info">
      <ion-label>
        <h3>Marcos Vargas</h3>
        <p class="subtitle">Ver perfil</p>
      </ion-label>
    </ion-col>
    <ion-col size="auto">
      <ion-icon name="chevron-forward-outline" color="primary"></ion-icon>
    </ion-col>
  </ion-row>

  <ion-list>
    <ion-item lines="full">
      <ion-icon slot="start" name="notifications-outline"></ion-icon>
      <ion-label>
        Push Notifications
      </ion-label>
      <ion-toggle slot="end" [checked]="true"></ion-toggle>
    </ion-item>
    <ion-item lines="full">
      <ion-icon slot="start" name="finger-print-outline"></ion-icon>
      <ion-label>
        Touch ID Lock
      </ion-label>
      <ion-toggle slot="end" [checked]="true"></ion-toggle>
    </ion-item>
    <ion-item lines="full" detail>
      <ion-icon slot="start" name="key-outline"></ion-icon>
      <ion-label>
        Change Password
      </ion-label>
    </ion-item>
    <ion-item lines="full" detail>
      <ion-icon slot="start" name="help-buoy-outline"></ion-icon>
      <ion-label>
        Get Support
      </ion-label>
    </ion-item>
  </ion-list>

  <!-- Información JWT (Debug) -->
  <ion-list>
    <ion-list-header>
      <ion-label color="medium">Información JWT (Debug)</ion-label>
    </ion-list-header>

    <ion-item lines="full" detail (click)="showTokenDetails = !showTokenDetails">
      <ion-icon slot="start" name="key-outline"></ion-icon>
      <ion-label>
        Ver Token JWT
      </ion-label>
    </ion-item>

    <ion-item lines="full" *ngIf="showTokenDetails">
      <ion-label class="ion-text-wrap">
        <h3>Estado del Token</h3>
        <p><strong>Expira en:</strong> {{ getTimeToExpiration() }}</p>
        <p><strong>Estado:</strong>
          <ion-badge [color]="isTokenExpired() ? 'danger' : 'success'">
            {{ isTokenExpired() ? 'Expirado' : 'Válido' }}
          </ion-badge>
        </p>
      </ion-label>
    </ion-item>

    <ion-item lines="full" *ngIf="showTokenDetails">
      <ion-label class="ion-text-wrap">
        <pre style="font-size: 10px; overflow-x: auto; background: #f5f5f5; padding: 10px; border-radius: 5px;">{{ getTokenInfo() }}</pre>
      </ion-label>
    </ion-item>

    <ion-item lines="full" *ngIf="showTokenDetails" (click)="copyToken()">
      <ion-icon slot="start" name="copy-outline"></ion-icon>
      <ion-label>
        Copiar Token
      </ion-label>
    </ion-item>
  </ion-list>

  <ion-button expand="block" class="ion-margin" color="danger" (click)="logout()">
    <ion-icon name="log-out" slot="start"></ion-icon> 
    Cerrar Sesión
  </ion-button>
</ion-content>